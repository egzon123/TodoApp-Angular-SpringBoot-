<!-- <h1> Todo </h1>

<div class="alert alert-success" *ngIf='message'>{{message}}</div>

<div class="container">
    <div class="row">
        <button (click)="addTodo()" class="btn btn-success">Add</button>
    </div>
  <table class="table">
    <thead>
      <tr>
        <th>Description</th>
        <th>Target Date</th>
        <th>is Completed?</th>
        <th *ngIf='isUserAdmin'>UserName</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
              <tr *ngFor="let todo of todos">
                <td>{{todo.description}}</td>
                <td>{{todo.targetDate | date | uppercase}}</td>
                <td>{{todo.done}}</td>
                <td *ngIf='isUserAdmin'>{{todo.username}}</td>
                <td ><button (click)="updateTodo(todo.id)" class="btn btn-success">Update</button></td>
                <td ><button (click)="deleteTodo(todo.id)" class="btn btn-warning">Delete</button></td>
              </tr>
    </tbody>

  </table>



<div> -->
    
<div class="container">
  <div class="card">
    <div class="card-header">
      <h5 class="card-title">Manage Todo's</h5>
    </div>
    <div class="card-body">
      <button (click)="addTodo()" style="margin: 0px 0px 20px 0px;" class="btn btn-primary"><i class="fa fa-plus"></i> Add Todos</button>
      
      <!-- <div class="row">
          <div class="container fadeIn m-0 pb-4" [ngClass]="showAddTodo ? 'd-block opacity-1': 'd-none opacity-0'">
              <div class="container">
                  <div class="alert alert-warning" *ngIf="todoForm.touched && todoForm.invalid">Enter valid values</div>
                  <div class="alert alert-warning" *ngIf="todoForm.touched && targetDate.invalid">Enter valid Target Date</div> 
                 
                  
                  <form (ngSubmit)="!todoForm.invalid && createTodo()" #todoForm="ngForm">
                    <fieldset class="form-group">
                      <label>Description</label>
                      <input type="text" #description="ngModel" 
                            [(ngModel)]="todo.description" class="form-control" 
                                name="description" required="required" minlength="5">
                                <div class="alert alert-danger" *ngIf="todoForm.touched && description.invalid">Enter atleast 5 characters in Description</div>
                    </fieldset>
                
                    <fieldset class="form-group">
                        <label>Target Date</label>
                        <input type="date" #targetDate="ngModel"
                        [ngModel]="todo.targetDate | date:'yyyy-MM-dd' "
                        (ngModelChange)="todo.targetDate = $event"
                        class="form-control" name="targetDate" required="required" >
                    </fieldset>
                
                    <button type="submit"  class="btn btn-success">Save</button>
                    <button class="btn btn-info" routerLink="/todos" style="margin-left: 15px;">Cancel</button>
                  </form>  
                </div>
          </div>
      </div> -->

      <h3><input class="form-control" placeholder="Search" [(ngModel)]="search"></h3>
      <div class="table-resposive table-hover shadow-lg prl-3 mb-5 bg-white rounded" style="overflow: auto; height: 500px;" >
        <table class="table">
          <caption>List of To-dos</caption>
          <thead class="thead-light" style="position: sticky;">
            <tr>
              <th scope="col">Description</th>
              <th scope="col">Target Date</th>
              <th scope="col">is Completed?</th>
              <th scope="col" *ngIf='isUserAdmin'>Username</th>
              <th scope="col" >Labels</th>
              <th scope="col" >Actions</th>
            </tr>
          </thead>
          
         
          <tbody>
            <tr *ngFor="let todo of filterTodos()">
              <td>{{todo.description}}</td>
              <td>{{todo.targetDate | date | uppercase}}</td>
              <!-- <td>{{todo.done}}</td> -->
              <td>{{todo.done | toString}}</td>
              <td *ngIf='isUserAdmin'>{{todo.username}}</td>
              <td ><div *ngFor="let label of todo.labels" style="display: inline;">
                  <label style="margin-right: 10px; background-color:bisque;"  class="rounded-sm">{{label.name}}</label>
                </div></td>
               
              <td style="padding:12px 0px 12px 0px;">
               
                <div class="dropdown">
                  <button style="margin-left: 15px; font-weight: 1000;" type="button" class="btn btn-danger" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <!-- <i class="fas fa-ellipsis-h"></i> -->
                    . . .
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <div class="dropdown-item">
                        <div class="delete" (click)="deleteTodo(todo.id)">
                            Delete
                          </div>
                    </div>
                    
                    <div class="dropdown-item">
                        <div class="update" (click)="updateTodo(todo.id)">
                            Update 
                          </div>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

